class LandView{constructor(t,...e){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.min_fontsize=9,this.canvas.setAttribute("width",this.canvas.clientWidth),this.canvas.setAttribute("height",this.canvas.clientHeight),e&&1==e&&window.matchMedia&&window.matchMedia("(max-device-width: 700px)").matches&&(this.canvas.setAttribute("width",3*this.canvas.clientWidth),this.canvas.setAttribute("height",3*this.canvas.clientHeight))}activeratio(t,e,i){let a=Object.keys(t),l=0;for(let s=0;s<a.length;s++){let h=a[s];if(h==e){let n=t[h];for(let c=0;c<n.length;c++)if(n[c].lot==i){l=n[c].ratio?n[c].ratio:1;break}break}}return l}draw_dot(t,e,i,a){let l=this.ctx;l.fillStyle=a,l.beginPath(),l.arc(t,e,i,0,2*Math.PI),l.closePath(),l.fill()}draw_text(t,e,i,a,l){let s=this.ctx;s.font=`${i}pt 'MS Gothic'`;let h=s.measureText(l);s.fillStyle=a,s.fillText(l,t-h.width/2,e+i/2)}draw(t,e,...[i,a]){let l=this.ctx;l.clearRect(0,0,this.canvas.width,this.canvas.height);let s=Object.keys(t);for(let h=0;h<s.length;h++){let n=s[h],c=t[n];l.beginPath();let r=-1,o=-1,$=0,d=0,f=0;for(let v=0;v<c.length;v++){let g=c[v],m=g[0],x=g[1];if(0==v?l.moveTo(m,x):l.lineTo(m,x),-1!=r){let _=(r*x-m*o)/2;$+=_,d+=_*(r+m)/3,f+=_*(o+x)/3}r=m,o=x}l.closePath();let b=(r*c[0][1]-c[0][0]*o)/2;d+=b*(r+c[0][0])/3,f+=b*(o+c[0][1])/3,$+=b;let w=d/$,u=f/$,k=(Math.sqrt($)/10)**1.05,y=0;if(k<this.min_fontsize&&(y=(Math.floor(3*Math.random())-1)*(k=this.min_fontsize)/2),i){let P=this.activeratio(i,a,n);P>0&&(l.fillStyle=`rgba(255,0,0,${P}`,l.fill())}l.strokeStyle="hotpink",l.stroke(),e>0&&this.draw_text(w,u+y,k,"blue",n)}}}