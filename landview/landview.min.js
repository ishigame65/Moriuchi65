class LandView{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.min_fontsize=9,this.canvas.setAttribute("width",this.canvas.clientWidth),this.canvas.setAttribute("height",this.canvas.clientHeight)}activeratio(t,e,i){let l=Object.keys(t),s=0;for(let a=0;a<l.length;a++){let h=l[a];if(h==e){let n=t[h];for(let o=0;o<n.length;o++)if(n[o].lot==i){s=n[o].ratio?n[o].ratio:1;break}break}}return s}draw_dot(t,e,i,l){let s=this.ctx;s.fillStyle=l,s.beginPath(),s.arc(t,e,i,0,2*Math.PI),s.closePath(),s.fill()}draw_text(t,e,i,l,s){let a=this.ctx;a.font=`${i}pt 'MS Gothic'`;let h=a.measureText(s);a.fillStyle=l,a.fillText(s,t-h.width/2,e+i/2)}draw(t,e,...[i,l]){let s=this.ctx;s.clearRect(0,0,this.canvas.width,this.canvas.height);let a=Object.keys(t);for(let h=0;h<a.length;h++){let n=a[h],o=t[n];s.beginPath();let r=-1,$=-1,c=0,f=0,d=0;for(let g=0;g<o.length;g++){let v=o[g],_=v[0],x=v[1];if(0==g?s.moveTo(_,x):s.lineTo(_,x),-1!=r){let b=(r*x-_*$)/2;c+=b,f+=b*(r+_)/3,d+=b*($+x)/3}r=_,$=x}s.closePath();let w=(r*o[0][1]-o[0][0]*$)/2;f+=w*(r+o[0][0])/3,d+=w*($+o[0][1])/3,c+=w;let k=f/c,m=d/c,y=(Math.sqrt(c)/10)**1.05,u=0;if(y<this.min_fontsize&&(u=(Math.floor(3*Math.random())-1)*(y=this.min_fontsize)/2),i){let P=this.activeratio(i,l,n);P>0&&(s.fillStyle=`rgba(255,0,0,${P}`,s.fill())}s.strokeStyle="hotpink",s.stroke(),e>0&&this.draw_text(k,m+u,y,"blue",n)}}}