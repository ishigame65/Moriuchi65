<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style2.css">
    <link rel="stylesheet" href="css/sitemap.css">
    <meta name="description" content="栽培計画ライブラリ">
    <link rel="shortcut icon" href="img/kame.ico">
    <title>栽培ライブラリ</title>
    <style>
        .sitemap {
            background-color: lavender;
            width: fit-content;
            padding: 0.5em 0.75em 0.1em 0.2em;
            font-size: smaller;
        }
        table.download {
            border: 1px solid gray;
            border-collapse: collapse;
            margin: 0.5em 0;            
            font-size: smaller;
        }
        article {
            max-width: none;
        }
        .html_frame, .view_frame {
            background-color: white;
            max-width: 94%;
        }
        .icon {
            margin-right: 8px;
            margin-top: 0.2em;
        }
        .mailto a {
            color: #5a5c5f;
            text-decoration: none;
        }
        #lineicon {
            height: 40px;
            margin-right: 0.5em;
        }
        .lineto {
            margin-top: 0.75em;
            margin-bottom: 0.75em;
        }
        .lineto a {
            color: #5a5c5f;
            text-decoration: none;
            line-height: 40px;
        }
        code {
            color: darkgoldenrod;
        }
        /* @media (max-width: 700px) {
        } */
    </style>
</head>
<body>

<div id="wrapper"> <!-- コンテンツ部分をdivで囲む　input要素と同じ階層に配置する -->
    <main>
        <div class="breadcrumb">
            <ul>
                <li><a href="index.html">Top</a></li>
                <li>栽培ライブラリ</li>
            </ul>
        </div> <!-- breadcrumb -->

        <h2 class="mono">栽培ライブラリ</h2>
        <section>
            <p class="indent">
                菜園カレンダー・菜園マップ・栽培記録を作成するために開発したJavsScriptライブラリです。
                ライブラリを利用して栽培データをJavaScriptで簡単に記述することにより、菜園カレンダー・菜園マップ・栽培記録を作成できます。
                <article class="indent">
                    菜園カレンダー<br>
                    <iframe class="view_frame" src="./cp_sample2.html" frameborder="1" width="600" height="330" style="zoom:0.75"></iframe>
                    <div class="notes">中央が薄くなっている作業を選択すると説明が表示されます</div>
                </article>
                <article class="indent">
                    菜園マップ<br>
                    <iframe class="view_frame" src="./cm_sample2.html" frameborder="1" width="530" height="400" style="zoom:0.75"></iframe>
                </article>
                <article class="indent">
                    栽培記録<br>
                    <iframe class="view_frame" src="./cl_sample2.html" frameborder="1" width="600" height="480" style="zoom:0.75"></iframe>
                    <div class="notes">作物名を選択して表示します</div>
                </article>
            </p>
            <h4 class="mono">開発の経緯</h4>
            <div class="indent">
                <ul class="indent">
                    <li>いつ何を植えれば良いかも分かっていない素人が手探りで野菜を育てているが、野菜は時期を逃すと栽培できないため、野菜作りに必要な作業を行う時期が一目でわかる菜園カレンダーを作ることにした</li>
                    <li>最初は一般的な作表ツール（Excelなど123的なやつ）や作図ツール（ドロー系ソフト）で作ってみたが、どうにも使いにくい（修正に余計な手間と時間が掛かる）し、見た目が不細工になってしまう</li>
                    <li>それなら優秀な先人が開発した作図ライブラリを利用して作ろうと考えたが、一般的なカレンダーやガントチャートを作成するライブラリは多くあるものの、菜園カレンダーに利用できる作図ライブラリが何故か見つからない</li>
                    <li>以上のことから、先ず専用のライブラリを開発してから、菜園カレンダーを作ることにした</li>
                    <li>次に、菜園マップと作物ごとの栽培記録を作成する機能をライブラリに追加した</li>
                    <li>菜園カレンダー・菜園マップ・栽培記録を作成するためには、栽培データをJavaScriptで簡単に記述
                        （つまりJavaScript言語でプログラミング）する必要があり、一般的には面倒かもしれない。
                        もし他に利用する人がいるなら、Excelで作成した栽培データを読み込んで自動生成する仕組みを用意しても良いかも。                        
                    </li>
                </ul>
            </div>
        </section>
        <section>
            <h3 class="mono">ダウンロード</h3>
            <div class="section_content">
                栽培ライブラリは下表のファイルで構成され、各ファイル名のリンクからダウンロードしてご利用いただけます（右クリックして[名前を付けてリンク先を保存]など）
                <table class="download">
                    <tr><th>ファイル名</th><th>種類</th><th>説明</th></tr>
                    <tr>
                        <td><a href="js/CultivationPlan.min.js">CultivationPlan.min.js</a></td>
                        <td>JavsScriptファイル</td>
                        <td>栽培計画クラス</td>
                    </tr>
                    <tr>
                        <td><a href="js/CultivationMap.min.js">CultivationMap.min.js</a></td>
                        <td>JavsScriptファイル</td>
                        <td>栽培地図クラス</td>
                    </tr>
                    <tr>
                        <td><a href="js/CultivationPlants.min.js">CultivationPlants.min.js</a></td>
                        <td>JavsScriptファイル</td>
                        <td>栽培植物クラス（栽培地図で利用）</td>
                    </tr>
                    <tr>
                        <td><a href="js/CultivationLog.min.js">CultivationLog.min.js</a></td>
                        <td>JavsScriptファイル</td>
                        <td>栽培記録クラス</td>
                    </tr>
                    <tr>
                        <td><a href="img/pluspat1.png">pluspat1.png</a></td>
                        <td>PNG画像ファイル</td>
                        <td>栽培地図の非栽培区画を表すパターン画像</td>
                    </tr>
                    <tr>
                        <td><a href="img/direction1.png">direction1.png</a></td>
                        <td>PNG画像ファイル</td>
                        <td>栽培地図の方位マーク画像</td>
                    </tr>
                    <tr>
                        <td><a href="css/CultiLog.css">CultiLog.css</a></td>
                        <td>CSSファイル</td>
                        <td>栽培記録の体裁を整えるスタイルシート</td>
                    </tr>
                    <tr>
                        <td><a href="js/popup.min.js">popup.min.js</a></td>
                        <td>JavsScriptファイル</td>
                        <td>栽培記録ポップアップ画面用ライブラリ</td>
                    </tr>
                    <tr>
                        <td><a href="css/popup.css">popup.css</a></td>
                        <td>CSSファイル</td>
                        <td>栽培記録ポップアップ画面用スタイルシート</td>
                    </tr>
                </table>
                ダウンロードした各ファイルを下図に示すフォルダに格納します<br>
                <div class="sitemap">
                    <ul>
                        <li>任意フォルダ/
                            <ul>
                                <li>js/
                                    <ul>
                                        <li>CultivationPlan.min.js</li>
                                        <li>CultivationMap.min.js</li>
                                        <li>CultivationPlants.min.js</li>
                                        <li>CultivationLog.min.js</li>
                                        <li>popup.min.js</li>
                                    </ul>
                                </li>
                                <li>css/
                                    <ul>
                                        <li>CultiLog.css</li>
                                        <li>popup.css</li>
                                    </ul>
                                </li>
                                <li>img/
                                    <ul>
                                        <li>pluspat1.png</li>
                                        <li>direction1.png</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

            </div>
        </section>

        <section>
            <h3 class="mono">菜園カレンダーを作成する方法</h3>
            <div class="section_content">
                <ol class="indent">
                    <li>ファイルとフォルダが下図の構成になっていることを確認する<br>
                        <div class="sitemap">
                            <ul>
                                <li>任意フォルダ/
                                    <ul>
                                        <li>index.html（次項で作成、任意ファイル名）</li>                                        
                                        <li>js/
                                            <ul>
                                                <li>CultivationPlan.min.js</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li>WEBページ（HTMLファイル）を作成する（例：`index.html`ファイル）
                        <ul class="indent">
                            <li>描画領域としてcanvasを作成<br>
                                <code>&lt;canvas id="CultiPlan" width="520" height="280"&gt;&lt;/canvas&gt;</code>
                            </li>
                            <li>栽培計画クラス`CultivationPlan.min.js`を読み込む<br>
                                <code>&lt;script src="js/CultivationPlan.min.js"&gt;&lt;/script&gt;</code>
                            </li>
                            <li>菜園カレンダーを作成する処理を記述
                                <ol class="indent">
                                    <li>栽培計画オブジェクトを生成（canvasのidを引数に指定）<br>
                                        <code>const plan = new CultivationPlan("CultiPlan");</code>
                                    </li>
                                    <li>作業（作業名、色）を定義<br>
                                        <code>plan.add_action('種蒔き', 'brown');</code>
                                    </li>
                                    <li>栽培期間データ準備<br>
                                        <code>
                                            const dataset = [<br>
                                                { 'name':'ニラ', '種蒔き':'3b-4a', '植え付け':'6b-7a' },<br>
                                                （省略）<br>
                                            ];<br>
                                            plan.set_dataset(dataset);
                                        </code>
                                        <ul class="indent">
                                            <li>作物ごとに作業期間を「作業名:期間」の形で記載する</li>
                                            <li>期間は、開始月-終了月の形で記載し、末尾にa（上旬）,b（中旬）,c（下旬）を付加できる</li>
                                        </ul>
                                    </li>
                                    <li>栽培方法説明準備<br>
                                        <code>
                                            const methodset = new Map();<br>
                                            methodset.set('ジャガイモ:植え付け', '畝幅65㎝、間隔25㎝、深さ8㎝。種芋は50g程度に切り分け');<br>
                                            （省略）<br>
                                            plan.set_methodset(methodset);
                                        </code>
                                        <ul class="indent">
                                            <li>作物＆作業ごとに栽培方法の説明を「作物:作業,栽培方法説明」の形で記載する</li>
                                            <li>栽培方法説明は句点（。）で改行されて表示される</li>
                                        </ul>
                                    </li>
                                    <li>描画<br>
                                        <code>
                                            window.addEventListener('load', function() {<br>
                                                plan.draw();<br>
                                            });
                                        </code>
                                    </li>
                                    <li>作業選択（栽培方法説明表示）<br>
                                        <code>
                                            const canvas = document.getElementById('CultiPlan');<br>
                                            canvas.addEventListener('click', (event) => {<br>
                                                plan.draw();<br>
                                                const rect = canvas.getBoundingClientRect();<br>
                                                const mx = event.clientX - rect.left;<br>
                                                const my = event.clientY - rect.top;<br>
                                                // canvasタグ指定canvasサイズ：520 x 280<br>
                                                const rx = 520 / rect.width;<br>
                                                const ry = 280 / rect.height;<br>
                                                plan.action_clicked(mx * rx, my * ry);<br>
                                            });   
                                        </code>
                                    </li>
                                </ol>
                            </li>
                            <li>見栄え調整（オプション設定）については「菜園カレンダーの作成例2」をご確認ください<br>
                                <code>plan.set_font("14px 'MS P Gothic'");    // フォント設定（オプション）<br>
                                plan.set_padding(10);                   // パディング設定（オプション）<br>
                                plan.set_border(0.25, 'blue');          // 罫線の幅と色を設定（オプション）<br>
                                plan.set_month_bgcolor('LightYellow');  // 月背景色設定（オプション）<br>
                                // plan.hide_legend();                  // 凡例非表示（オプション）<br>
                                plan.set_today(0.75, 'red');            // 今日線の幅と色を設定（オプション）</code>
                            </li>
                            <li>WEBページ（HTMLファイル）はテキストエディタ（メモ帳など）で作成することができます</li>
                        </ul>
                    </li>
                    <li>作成したWEBページ（例：`index.html`ファイル）をWEBブラウザで表示する</li>
                </ol>
            </div>
            <h4 class="mono">菜園カレンダーの作成例1</h4>
            <article>
                <h5 class="mono">表示</h5>
                <iframe class="view_frame" src="./cp_sample1.html" frameborder="1" width="600" height="300" style="zoom:0.75"></iframe>
                <div class="notes">中央が薄くなっている作業を選択すると説明が表示されます</div>
            </article>
            <article>
                <h5 class="mono">HTMLファイル</h5>
                <iframe class="html_frame" src="./cp_sample1.txt" frameborder="1" width="710" height="370" style="zoom:0.85"></iframe>
            </article>
            <h4 class="mono">菜園カレンダーの作成例2</h4>
            <article>
                <h5 class="mono">表示</h5>
                <iframe class="view_frame" src="./cp_sample2.html" frameborder="1" width="600" height="330" style="zoom:0.75"></iframe>
                <div class="notes">中央が薄くなっている作業を選択すると説明が表示されます</div>
            </article>
            <article>
                <h5 class="mono">HTMLファイル</h5>
                <iframe class="html_frame" src="./cp_sample2.txt" frameborder="1" width="710" height="370" style="zoom:0.85"></iframe>
            </article>
        </section>

        <section>
            <h3 class="mono">菜園マップを作成する方法</h3>
            <div class="section_content">
                <ol class="indent">
                    <li>ファイルとフォルダが下図の構成になっていることを確認する<br>
                        <div class="sitemap">
                            <ul>
                                <li>任意フォルダ/
                                    <ul>
                                        <li>index.html（次項で作成、任意ファイル名）</li>                                        
                                        <li>js/
                                            <ul>
                                                <li>CultivationMap.min.js</li>
                                                <li>CultivationPlants.min.js</li>
                                            </ul>
                                        </li>
                                        <li>img/
                                            <ul>
                                                <li>pluspat1.png</li>
                                                <li>direction1.png</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li>WEBページ（HTMLファイル）を作成する（例：`index.html`ファイル）
                        <ul class="indent">
                            <li>描画領域としてcanvasを作成<br>
                                <code>&lt;canvas id="CultiMap" width="229" height="229"&gt;&lt;/canvas&gt;</code>
                            </li>
                            <li>栽培植物クラス`CultivationPlants.min.js`を読み込む（栽培植物クラスを利用する場合）<br>
                                <code>&lt;script src="js/CultivationPlants.min.js"&gt;&lt;/script&gt;</code>
                            </li>
                            <li>栽培地図クラス`CultivationMap.min.js`を読み込む<br>
                                <code>&lt;script src="js/CultivationMap.min.js"&gt;&lt;/script&gt;</code>
                            </li>
                            <li>菜園マップを作成する処理を記述
                                <ol class="indent">
                                    <li>栽培地図オブジェクトを生成（canvasのidを引数に指定）<br>
                                        <code>const map = new CultivationMap("CultiMap");</code>
                                    </li>
                                    <li>畑全体サイズ設定（単位cm）<br>
                                        <code>map.set_garden_size(229, 229);</code>
                                    </li>
                                    <li>非栽培エリア設定（色、区画）<br>
                                        <code>map.set_dead_color('path', 'tan');<br>
                                        map.add_dead('path', 0, 100, 228, 40);</code>
                                    </li>
                                    <li>栽培植物（色）設定（栽培植物クラスを利用しない方法）<br>
                                        <code>map.set_plant_color('ジャガイモ', 'sandybrown');<br>
                                        map.set_plant_color('ニラ', 'mediumseagreen');<br>
                                        map.set_plant_color('玉ねぎ', 'khaki');</code>
                                    </li>
                                    <li>栽培区画設定<br>
                                        <code>map.add_plant('ジャガイモ', 0, 0, 228, 100);<br>
                                        map.add_plant('ニラ', 0, 140, 228, 44);<br>
                                        map.add_plant('玉ねぎ', 0, 184, 228, 44);</code>
                                    </li>
                                    <li>描画<br>
                                        <code>
                                            window.addEventListener('load', function() {
                                                map.draw(dataset);
                                            });
                                        </code>
                                    </li>
                                </ol>
                            </li>
                            <li>方位設定や見栄え調整（オプション設定）については「菜園マップの作成例2」をご確認ください<br>
                                <code>
                                    map.set_direction(-30, 10, 10); // 方位設定（オプション：角度、X位置、Y位置）<br>
                                    map.set_basic_font("14px 'MS P Gothic'"); // 基本フォント設定（オプション）</code>
                            </li>
                            <li>栽培植物クラスを利用して栽培エリアの栽培植物（色）を設定できます（参照：菜園マップの作成例2）<br>
                                <code>
                                    const plants = new CultivationPlants();        // 栽培植物<br>
                                    plants.set_color('ジャガイモ', 'sandybrown');<br>
                                    plants.set_color('ニラ', 'mediumseagreen');<br>
                                    plants.set_color('玉ねぎ', 'khaki');<br>
                                    map.set_plants(plants);                    // 栽培植物設定</code>
                            </li>
                            <li>栽培区画設定時にadd_plant_font関数を利用して個別フォントを指定できます<br>
                                <code>
                                    const small_font = "10px 'MS P Gothic'";<br>
                                    map.add_plant_font('にんにく', 0, 0, 30, 30, small_font);</code>
                            </li>
                            <li>add_plant_font関数でフォント'noname'を指定すると栽培植物名が非表示となります<br>
                                <code>map.add_plant_font('にんにく', 0, 0, 30, 30, 'noname');</code>
                            </li>
                            <li>WEBページ（HTMLファイル）はテキストエディタ（メモ帳など）で作成することができます</li>                            
                        </ul>
                    </li>
                    <li>作成したWEBページ（例：`index.html`ファイル）をWEBブラウザで表示する</li>
                </ol>
            </div>
            <h4 class="mono">菜園マップの作成例1</h4>
            <article>
                <h5 class="mono">表示</h5>
                <iframe class="view_frame" src="./cm_sample1.html" frameborder="1" width="530" height="350" style="zoom:0.75"></iframe>
            </article>
            <article>
                <h5 class="mono">HTMLファイル</h5>
                <iframe class="html_frame" src="./cm_sample1.txt" frameborder="1" width="710" height="370" style="zoom:0.85"></iframe>
            </article>
            <h4 class="mono">菜園マップの作成例2</h4>
            <article>
                <h5 class="mono">表示</h5>
                <iframe class="view_frame" src="./cm_sample2.html" frameborder="1" width="530" height="400" style="zoom:0.75"></iframe>
            </article>            
            <article>
                <h5 class="mono">HTMLファイル</h5>
                <iframe class="html_frame" src="./cm_sample2.txt" frameborder="1" width="710" height="370" style="zoom:0.85"></iframe>
            </article>
        </section>

        <section>
            <h3 class="mono">栽培記録を作成する方法</h3>
            <div class="section_content">
                <ol class="indent">
                    <li>ファイルとフォルダが下図の構成になっていることを確認する<br>
                        <div class="sitemap">
                            <ul>
                                <li>任意フォルダ/
                                    <ul>
                                        <li>index.html（次項で作成、任意ファイル名）</li>                                        
                                        <li>js/
                                            <ul>
                                                <li>CultivationLog.min.js</li>
                                                <li>popup.min.js</li>
                                            </ul>
                                        </li>
                                        <li>css/
                                            <ul>
                                                <li>CultiLog.css</li>
                                                <li>popup.css</li>
                                            </ul>
                                        </li>
                                        <li>img/</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li>WEBページ（HTMLファイル）を作成する（例：`index.html`ファイル）
                        <ul class="indent">
                            <li>栽培記録の体裁を整えるスタイルシートを読み込む<br>
                                <code>&lt;link rel="stylesheet" href="css/CultiLog.css"&gt;</code>
                            </li>
                            <li>栽培記録用のdiv領域を作成<br>
                                <code>&lt;div id="CultiLog"&gt;&lt;/div&gt;</code>
                            </li>
                            <li>栽培記録クラス`CultivationLog.min.js`を読み込む<br>
                                <code>&lt;script src="js/CultivationLog.min.js"&gt;&lt;/script&gt;</code>
                            </li>
                            <li>栽培記録を作成する処理を記述
                                <ol class="indent">
                                    <li>栽培記録オブジェクトを生成（栽培記録用divのidを引数に指定）<br>
                                        <code>const log = new CultivationLog("CultiLog");</code>
                                    </li>
                                    <li>作物と日付ごとに栽培記録を追加<br>
                                        <code>log.add_log('玉ねぎ', '2025/06/07', 'img/a250607t.jpg', '収穫');</code>
                                    </li>
                                    <li>栽培記録用div領域に栽培記録を設定<br>
                                        <code>log.set_logs();</code>
                                    </li>
                                </ol>
                            </li>
                            <li>ポップアップライブラリを読み込む<br>
                                <code>&lt;script src="js/popup.min.js"&gt;&lt;/script&gt;</code>
                            </li>
                            <li>栽培記録を追加する方法は「栽培記録の作成例2」をご確認ください<br>
                                <code>
                                    log.add_log('玉ねぎ', '2025/06/07', 'img/a250607t.jpg', '収穫');<br>
                                    log.add_log('ニラ', '2024/04/26', 'img/a240426nr.jpg', '2年目春');<br>
                                    log.add_log('ニラ', '2025/01/25', 'img/a250113nr1.jpg, img/a250113nr2.jpg', '3年目冬刈取');<br>
                                </code>
                            </li>
                            <li>栽培記録に指定した写真（画像ファイル）はimgフォルダの下に置きます</li>
                            <li>見栄え調整（オプション設定）については「栽培記録の作成例2」をご確認ください<br>
                                <code>
                                    // log.set_label_style(0);  // マーカー付き縦並びスタイル（デフォルト）<br>
                                    // log.set_label_style(1);  // 縦並びスタイル<br>
                                    log.set_label_style(2);  // 横並びスタイル<br>
                                    log.set_label_lineheight('2');  // 行高さ指定<br>
                                    log.set_label_gap('3em');       // 横並び時の間隔指定<br>
                                    log.set_margin('1em 0 1em 0');  // 周囲余白指定（上、右、下、左）<br>
                                </code>
                            </li>
                            <li>`CultiLog.css`を参考にstyleタグでスタイル指定して体裁を整えることもできます</li>
                            <li>WEBページ（HTMLファイル）はテキストエディタ（メモ帳など）で作成することができます</li>
                        </ul>
                    </li>
                    <li>作成したWEBページ（例：`index.html`ファイル）をWEBブラウザで表示する</li>
                </ol>
            </div>
            <h4 class="mono">栽培記録の作成例1</h4>
            <article>
                <h5 class="mono">表示</h5>
                <iframe class="view_frame" src="./cl_sample1.html" frameborder="1" width="600" height="400" style="zoom:0.75"></iframe>
                <div class="notes">作物名を選択して表示します</div>
            </article>
            <article>
                <h5 class="mono">HTMLファイル</h5>
                <iframe class="html_frame" src="./cl_sample1.txt" frameborder="1" width="710" height="370" style="zoom:0.85"></iframe>
            </article>
            <h4 class="mono">栽培記録の作成例2</h4>
            <article>
                <h5 class="mono">表示</h5>
                <iframe class="view_frame" src="./cl_sample2.html" frameborder="1" width="600" height="480" style="zoom:0.75"></iframe>
                <div class="notes">作物名を選択して表示します</div>
            </article>
            <article>
                <h5 class="mono">HTMLファイル</h5>
                <iframe class="html_frame" src="./cl_sample2.txt" frameborder="1" width="710" height="370" style="zoom:0.85"></iframe>
                <br><small>styleタグで写真（画像ファイル）の大きさを40%に指定している</small>
            </article>
        </section>
        <section>
            <h3 class="mono">今後について</h3>
            <div class="section_content">
                ご要望があれば機能の改善や強化を検討したいと考えていますので、お気軽にご連絡ください。
                <dl>
                    <dt>連絡先</dt>
                    <dd>
                        <div class="mailto"><a href="mailto:moriuchi@ymail.ne.jp"><img src="img/mail.png" class="icon">moriuchi@ymail.ne.jp</a></div>
                    </dd>
                    <dd>
                        <div class="lineto"><a href="https://lin.ee/KBpGvoV"><img src="img/line_icon.png" alt="" id="lineicon">森内</a></div>
                    </dd>
                </dl>
            </div>
        </section>
    </main> <!-- メインコンテンツ -->
    <footer> <!-- フッターコンテンツ -->

    </footer>
</div>

</body>
</html>
