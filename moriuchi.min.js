window.onload=()=>{(new App).init()};
class App{constructor(){this.ctx=this.canvas=null;this.isMouseDown=!1}init(){this.canvas=document.querySelector("#EYECANVAS");this.ctx=this.canvas.getContext("2d");window.addEventListener("mousemove",a=>this.mousemove(a));this.canvas.addEventListener("mousedown",a=>this.mouseclick(a))}mouseclick(a){const c=this.canvas;var b=c.getBoundingClientRect();a=a.clientX-b.left;b=c.width/4+c.width/5-2;a>c.width/4-c.width/5+2&&a<b&&this.passwd_gate()}passwd_gate(){const a=prompt("\u5408\u8a00\u8449\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044",
"");/\W+/g.test(a)?alert("\u534a\u89d2\u82f1\u6570\u5b57\u3068\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306e\u307f\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"):null!=a&&(location.href=a+".html")}mousemove(a){const c=this.canvas;var b=this.ctx;b.clearRect(0,0,c.width,c.height);b.lineWidth=4;var d=c.getBoundingClientRect();b=a.clientX-d.left;a=a.clientY-d.top;d=c.width/5;const e=.45*c.height;this.drawEye(d,e,b,a,c.width/4,c.height/2);this.drawEye(d,e,b,a,3*c.width/4,c.height/2)}drawArc(a,c,b,d,e){const f=
this.ctx;f.beginPath();null==f.ellipse?f.arc(a,c,b,0,2*Math.PI,!0):f.ellipse(a,c,b,d,0,0,2*Math.PI,!0);f.fillStyle=e;f.fill()}drawEye(a,c,b,d,e,f){const g=this.ctx,h=Math.atan2(d-f,b-e);let k=a*c/Math.sqrt(Math.pow(a,2)*Math.pow(Math.sin(h),2)+Math.pow(c,2)*Math.pow(Math.cos(h),2));b=Math.sqrt(Math.pow(b-e,2)+Math.pow(d-f,2));b<k&&(k=b);this.drawArc(e,f,a,c,"white");g.strokeStyle="black";g.stroke();g.save();g.clip();this.drawArc(e+Math.cos(h)*(k-.42*a),f+Math.sin(h)*(k-.42*a),.34*a,.3*c,"black");
g.restore()}};let FileUtil={downloadText:function(a,c){const b=document.createElement("a");a=URL.createObjectURL(new Blob([a],{type:"text/plain"}));b.href=a;b.download=c;document.body.appendChild(b);b.click();document.body.removeChild(b);URL.revokeObjectURL(a)},readText:function(a,c="utf-8",b){const d=new FileReader;d.onload=e=>b(e.target.result,a,e);d.onerror=e=>b(null,a,e);d.readAsText(a,c)},readTextSync:async function(a,c){return(new Promise((b,d)=>{FileUtil.readText(a,c,(e,f,g)=>b(e))})).then(b=>b)},initDnDReadText:function(a,
c="utf-8",b){this.initDnDFile(a,(d,e)=>{this.readText(d,c,(f,g,h)=>b(f,g,h,e))})},initDnDFile:function(a,c){a.addEventListener("drop",b=>{b.preventDefault();const d=b.dataTransfer.files[0];d&&c(d,b)});a.addEventListener("dragover",b=>{b.preventDefault()})}};
